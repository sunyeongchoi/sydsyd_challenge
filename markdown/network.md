# OSI 7 계층

> 아파서 탈난다 픽

### OSI 7 계층이란?

- 컴퓨팅 장치나 네트워킹 장치를 만들 때 OSI 참조모델을 참조애서 모든 통신장치를 만들게 됨 --> 이때 필요한게 OSI 7 Layer
- 서로 알아들을 수 있는 규칙을 정한 것
- A랑 B랑 통신하려 해도 각 회사마자 정의한 통신 규격이 다르면 통신할 수 X
- 통신이 일어나는 과정을 7단계로 구분하여 한 눈에 들어올 수 있도록 정의함
- 각 계층은 독립되어있다.
- `전기적 특성`
- `bit 형태 전송`



### 7 계층

1. Physical(물리 계층)
2. Data link(데이터 링크 계층)
3. Network(네트워크 계층)
4. Transport(전송 계층)
5. Session(세션 계층)
6. Presentation(표현 계층)
7. Application(응용 계층)



물리계층

- 통신 케이블을 통해 전기 신호를 사용하여 비트 스트림을 전송하는 계층
- 비트는 물리계층에서 사용되는 단위 --> 0과 1로 구분(전기신호)
- 전기신호를 주고 받는데 주 목적
- 데이터의 종류나 에러가 있는지 등 확인은 하지 않음



데이터 링크 계층

- 물리적인 네트워크 사이에 Data전송을 담당하는 계층
- 물리계층으로 데이터 전송시 데이터 전송 오류를 감지
- 오류 감지시 재전송
- MAC 주소를 가지고 통신
- 데이터를 `frame`이라는 논리적 단위로 구성



네트워크 계층

- 전송 데이터를 목적지까지 경로를 찾아 전송하는 계층
- 주소(IP)를 정하고, `경로(Route)를 선택`하고, `패킷`을 전달하는 것이 핵심
- 네트워크 `라우팅` 기능도 이 계층에서 이루어짐
- 트레픽이 몰리지 않도록 하는 `혼잡 제어`, `패킷의 분할과 병합` 등의 역할 ex)라우터



전송 계층

- 데이터를 전송하고, 전송 속도를 조절하며, 오류가 발생되는 부분은 다시 맞춰주는 계층
- 보통 TCP프로토콜을 주로 사용
- 데이터를 전송받은 경우, 전송계층에서 데이터를 합산하여 세션 계층으로 보내줌
- 헤더에 송.수신지 포트번호를 포함하여 전달하는 계층
- 데이터 전송 단위는 `TCP -> Segment`, `UDP -> Datagram`
- `프로세스간의 연결` 기능 제공



세션 계층

- 네트워크상 양쪽 연결을 관리, 연결을 지속시켜주는 계층
- `동기화를 유지` 하는 서비스 제공
- 세션을 만들고 유지, 세션 종료, 전송 중단 시 복구 기능
- 세션 계층에서 TCP/IP세션을 만들고 없앰
- 통신하는 사용자들을 동기화 하고 오류복구를 진행
- 통신 연결은 포트기반
- OS가 세션계층에 속함



표현 계층

- 응용계층으로부터 전달받거나 전송하는 데이터의 `인코딩` 및 `디코딩`이 이루어지는 계층
- Data를 이해할 수 있게 응용프로그램에 맞춰 변환
- JPEG, TIFF, GIF, MPEG등 다양한 포멧을 구분



응용 계층

- OSI의 최상위 계층
- 사용자 또는 어플리케이션이 네트워크에 접근할 수 있도록 해줌
- 사용자를 위한 인터페이스 제공
- 사용자에게 보이는 유일한 계층
- 메일 전송, 인터넷 접속등의 작업을 수행
- `ex) HTTP, SMTP, SNTP, FTP, TELNET, SSH, NFS` 등





# TCP 3&4 way handshake

### TCP 3 Way Handshake란?

- TCP/IP프로토콜을 이용해서 통신을 하는 응용프로그램이 데이터를 전송하기 전에 먼저 정확한 전송을 보장하기 위해 상대방 컴퓨터와 사전에 세션을 수립하는 과정

- TCP연결을 초기화 할 때 사용

### TCP 4 Way Handshake란

- TCP연결이 해제 될 때 FIN 패킷, ACK 패킷을 각각 한번 씩 주고 받으면서 연결을 종료. 이를 4 way handshake라 한다.

- 세션을 종료하기 위해 수행되는 절차



### TCP 3 Way Handshaking 과정

1. A클라이언트는 B서버에 접속을 요청하는 SYN패킷을 보낸다.

   이때 A클라이언트는 SYN을 보내고 SYN/ACK 응답을 기다리는 SYN_SENT상태가 됨

2. B서버는 SYN요청을 받고 A클라이언트에게 요청을 수락한다는 ACK와 SYN flag가 설정된 패킷을 발송하고 A가 다시 ACK으로 응답하기를 기다린다.

   이때 B서버는 SYN_RECEIVED 상태가 된다.

3. A클라이언트는 B서버에게 ACK을 보내고 이후로부터는 연결이 이루어지고 데이터가 오가게 되는 것



### TCP 4 Way Handshaking 과정

1. 클라이언트가 연결을 종료하겠다는 FIN플래그를 전송
2. 서버는 일단 확인메시지를 보내고 자신의 통신이 끝날때까지 기다리는데 이 상태가  **TIME_WAIT** 상태
3. 서버가 통신이 끝났으면 연결이 종료되었다고 클라이언트에게 FIN플래그를 전송
4. 클라이언트는 확인했다는 메시지를 보낸다.





# TCP/IP 흐름제어 & 혼잡제어

### TCP 통신이란

- 네트워크 통신에서 신뢰적인 연결방식
- 흐름제어 : 송신측과 수신측의 데이터 처리 속도 차이를 해결하기 위한 기법
- 혼잡제어 : 송신측의 데이터 전달과 네트워크의 데이터 처리 속도 차이를 해결하기 위한 기법



### **흐름제어란?**

- 송신 측이 수신 측보다 빠르면 문제생김 —> 송신 측의 데이터 전송량을 수신 측에 따라 조정
- 해결방법
  - Stop and Wait : 매번 전송한 패킷에 대해 확인 응답을 받아야만 그 다음 패킷을 전송하는 방법
  - Sliding windows : 수신측에서 윈도우 사이즈를 설정하여 이 크기만큼 세그먼트를 전송하는 기법. 이 윈도우 사이즈는 수신측의 여유 버퍼 공간을 반영하여 동적으로 결정

### **혼잡제어란?**

- 네트워크의 혼잡을 피하기 위해 송신측에서 보내는 데이터의 전송속도를 강제로 줄이는 작업
- 네트워크 내에 패킷의 수가 과도하게 증가하는 형상을 혼잡이라 하며, 혼잡 현상을 방지하거나 제거하는 기능
- 흐름제어가 송신측과 수신측 사이의 전송속도를 다루는데 반해, 혼잡제어는 호스트와 라우터를 포함한 보다 넓은 관점에서 전송 문제를 다룸
- 해결방법
  - AIMD
  - Slow start
  - Fast Recovery









# UDP

### UDP란?

- IP를 사용하는 네트워크 내에서 컴퓨터 간에 메시지들이 교환될 때 제한된 서비스만을 제공
- TCP의 대안
- 신뢰할 수 없는 프로토콜
- 상대방과 연결되어있는 개념이 아님.
- 소켓을 개설하고 그냥 데이터를 보내는 개념
- 편지를 보내는 방식과 유사. 편지를 보냈더라도 편지를 받는 사람은 편지함을 열어보기 전에는 편지가 제대로 왔는지 알 수 없다.
- 안정적이지 않고 순서도 보장되지 않음. 
- 데이터를 잃을 수도, 중복될 수도 있다.





![](https://t1.daumcdn.net/cfile/tistory/99F6363359FDDC9E1F)







# 대칭키 & 공개키

### 대칭키란?

- 암호화와 복호화에 같은 암호키를 사용하는 암호화 알고리즘
- 암호화 및 복호화가 빠르다
- 암호화 통신을 하는 사용자끼리 같은 대칭키를 공유해야만 한다는 단점이 있다.
- 단점 : 대칭키를 사용자끼리 물리적으로 직접 만나서 전달하지 않는한, 전달 과정에서 해킹의 위험에 노출 가능성

### 공개키란?

- 암호화와 복호화에 사용하는 암호키를 분리한 방식
- 단점 : 암복호화가 매우 복잡

### SSL이란?

- 대칭키 암호화 방식 & 공개키 암호화 방식 적절히 혼합
- 대칠키를 주고 받을 때만 공개키 암호화 방식을 사용, 이후네는 계속 대칭키 암호화 방식으로 통신

# HTTP & HTTPS

### HTTP란?

- www상에서 정보를 주고 받는 프로토콜
- 웹브라우저와 서버간의 웹페이지같은 자원을 주고 받을 때 쓰는 통신 규약
- HTTP는 텍스트 교환(html, binary 다 텍스트) —> 누군가 네트워크에서 신호를 가로채어 본다면 내용이 노출
- 이런 보안상의 문제를 해결해주는 프로토콜이 HTTPS

### HTTPS란?

- 인터넷 상에서 정보를 암호화하는 SSL프로토콜을 이용하여 웹브라우저와 서버가 데이터를 주고받는 통신 규약
- http메세지(text)를 암호화 하는 것
- 공개키 암호화 방식

# 로드밸런싱(Load Balancing)

- 웹서버의 부하를 해결하는 방법
- 서버에 가해지는 부하를 분산해주는 장치
- 로드밸런싱 그림

![](https://t1.daumcdn.net/cfile/tistory/25510C495909245F21)

- 로드밸런싱 방법
  1. 네임(DNS)서버의 도메인을 이용한 DNS 라운드 로빈
  2. L4를 이용한 로드밸런싱

# Blocking & Non-Blocking I/O

### Blocking이란?

- I/O 작업이 진행되는동안 유저 프로세스는 자신의 작업을 중단한채 대기해야함
- I/O작업이 CPU자원을 거의 쓰지 않기 때문에 이런 현태의 I/O는 리소스 낭비가 심하다

### Non-Blocking이란?

- Blocking방식의 비효율성을 극복하고자 만들어진 것
- I/O작업을 진행하는 동안 유저 프로세스의 작업을 중단시키지 않는다.



------

# 용어 정리

윈도우 사이즈 : 한번에 받을 수 있는 데이터의 양